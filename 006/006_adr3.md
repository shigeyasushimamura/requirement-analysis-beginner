# ADR-003: ドメインモデルにおける(Immutability)の徹底

- **Status:** Accepted
- **Date:** 2025-12-19

# Context

- 在庫データは複数のユーザから同時に操作されるため、状態管理が複雑になりやすい
- オブジェクトの状態がいつどこで書き換わったか追跡できない。ミュータブルな設計は再現性の低いバグを生む原因となる

# Decision

- ドメインオブジェクト(Entity, ValueObject)は原則として不変(Immutable)とする
- Setter メソッドを禁止して、状態変更の際には、必ず新しいインスタンスを生成して返す設計とする

# Consequence

- Positive: 副作用(Side Effect)がないため、コードの予測可能性が高まる。ある時点のオブジェクトの状態が保証されるため、デバッグが容易になる
- Negative: 手続き型プログラミングに慣れた開発者に対して学習コストが発生する
